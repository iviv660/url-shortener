# üîó URL Shortener (Golang + Postgres + Redis + Gin)
–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go.  
–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ **Postgres**, –∫—ç—à–∏—Ä—É–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ **Redis**,  
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Gin** –¥–ª—è HTTP-–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
---
## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [‚öôÔ∏è –°—Ç–µ–∫](#Ô∏è-—Å—Ç–µ–∫)
- [üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [üì¶ –ó–∞–ø—É—Å–∫](#-–∑–∞–ø—É—Å–∫)
    - [1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç](#1-–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å-–ø—Ä–æ–µ–∫—Ç)
    - [2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª env](#2-—Å–æ–∑–¥–∞—Ç—å-—Ñ–∞–π–ª-env)
    - [3. –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã](#3-–ø–æ–¥–Ω—è—Ç—å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- [üöÄ API](#-api)
    - [POST /shorten](#post-shorten)
    - [GET /short](#get-short)
- [üìñ Swagger](#-swagger)
---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö URL –¥–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤
- –†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ –∫–æ—Ä–æ—Ç–∫–∏–º —Å—Å—ã–ª–∫–∞–º
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è URL
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis —Å TTL
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ URL –≤—Å–µ–≥–¥–∞ –¥–∞—ë—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π short-–∫–æ–¥
- Rate limiting (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ middleware)
- TTL –¥–ª—è —Å—Å—ã–ª–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`/swagger/index.html`)

---

## ‚öôÔ∏è –°—Ç–µ–∫
- **Go** 1.24.4
- **Postgres** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **Redis** ‚Äî –∫—ç—à
- **Gin** ‚Äî HTTP-—Å–µ—Ä–≤–µ—Ä
- **golang-migrate** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã
- **swaggo/swag** ‚Äî Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- cmd/app/main.go # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- internal/config # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ env
- internal/database # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Postgres/Redis
- internal/repository # —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ –∫—ç—à–µ–º
- internal/usecase # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- internal/handler # HTTP-—Ö—ç–Ω–¥–ª–µ—Ä—ã (Gin)
- migrations/ # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
- internal/docs/ # Swagger (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è swag init)

## üì¶ –ó–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
```bash
git clone https://github.com/iviv660/url-shortener.git
cd url-shortener
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env
```bash
# Postgres
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DB=

# Postgres (—Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
DATABASE_URL=postgresql://_:_@postgres:5432/_?sslmode=disable

# Redis (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
REDIS_URL=redis://redis:6379/0

# –ë–∞–∑–æ–≤—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
BASE_URL=http://localhost:3000

# –°–µ–∫—Ä–µ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤
SHORT_CODE_SECRET=_

# TTL –∫—ç—à–∞ (—Å–µ–∫—É–Ω–¥—ã)
CACHE_TTL_SECONDS=_

# –û–∫—Ä—É–∂–µ–Ω–∏–µ
APP_ENV=_
```

### 3. –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose up
```

## üöÄ API
### POST /shorten
#### –°–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–ª–∏–Ω–Ω—ã–π URL.

### –ó–∞–ø—Ä–æ—Å
```bash
curl -X POST http://localhost:3000/shorten \
  -H "Content-Type: application/json" \
  -d '{"url": "https://github.com/iviv660"}'
```
### –û—Ç–≤–µ—Ç
```bash
{
  "short_code": "iHwL01z-",
  "short_url": "http://localhost:3000/—Å–æ–∫—Ä–∞—â–µ–Ω—ã–π url"
}
```

### GET /:short
#### –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL.

```bash
curl -i http://localhost:3000/—Å–æ–∫—Ä–∞—â–µ–Ω—ã–π url
```
### –û—Ç–≤–µ—Ç
```bash
{
  "short_code": "—Å–æ–∫—Ä–∞—â–µ–Ω—ã–π url",
  "short_url": "http://localhost:3000/—Å–æ–∫—Ä–∞—â–µ–Ω—ã–π url"
}
```
## üìñ Swagger
#### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
```bash
    http://localhost:3000/swagger/index.html
```